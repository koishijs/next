import{_ as o,r as t,o as p,c as r,e as n,w as a,F as c,a as s,b as l}from"./app.7e6eba9e.js";const F={},i=s("h1",{id:"\u6269\u5C55\u6570\u636E\u6A21\u578B",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u6269\u5C55\u6570\u636E\u6A21\u578B","aria-hidden":"true"},"#"),l(" \u6269\u5C55\u6570\u636E\u6A21\u578B")],-1),y=s("p",null,[l("\u5982\u679C\u4F60\u7684\u63D2\u4EF6\u9700\u8981\u58F0\u660E\u65B0\u7684\u5B57\u6BB5\u6216\u8005\u8868\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7 "),s("code",null,"ctx.model"),l(" \u6765\u5BF9\u6570\u636E\u6A21\u578B\u8FDB\u884C\u6269\u5C55\u3002\u8BF7\u6CE8\u610F\uFF0C\u6570\u636E\u6A21\u578B\u7684\u6269\u5C55\u4E00\u5B9A\u8981\u5728\u4F7F\u7528\u524D\u5B8C\u6210\uFF0C\u4E0D\u7136\u540E\u7EED\u6570\u636E\u5E93\u64CD\u4F5C\u53EF\u80FD\u4F1A\u5931\u8D25\u3002")],-1),d=s("h2",{id:"\u6269\u5C55\u5B57\u6BB5",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u6269\u5C55\u5B57\u6BB5","aria-hidden":"true"},"#"),l(" \u6269\u5C55\u5B57\u6BB5")],-1),h=s("p",null,"\u5411\u5185\u7F6E\u7684 User \u8868\u4E2D\u6CE8\u5165\u5B57\u6BB5\u7684\u65B9\u5F0F\u5982\u4E0B\uFF1A",-1),u=s("pre",{class:"shiki monokai twoslash lsp",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("div",{class:"code-container"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// TypeScript \u7528\u6237\u9700\u8981\u8FDB\u884C\u7C7B\u578B\u5408\u5E76")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"declare"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF"}},"module"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'koishi'"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#66D9EF"}},"interface"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},[s("data-lsp",{lsp:`interface User
namespace User`},"User")]),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("    "),s("data-lsp",{lsp:"(property) User.foo: string"},"foo")]),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF"}},"string")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")]),l(`
`),s("span",{class:"line"},"\xA0"),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[s("data-lsp",{lsp:"const ctx: Context"},"ctx"),l("."),s("data-lsp",{lsp:"(property) Context.Services.model: DatabaseService"},"model"),l(".")]),s("span",{style:{color:"#A6E22E"}},[s("data-lsp",{lsp:`(method) Database<Tables>.extend<"user">(name: "user", fields: MapField<{
    id?: string;
} & {
    flag?: number;
} & {
    authority?: number;
} & {
    name?: string;
} & {
    locale?: string;
} & {
    usage?: Dict<number, string>;
} & {
    timers?: Dict<number, string>;
} & {
    ...;
}>, config?: Model<S = any>.Config<...>): void`},"extend")]),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'user'"),s("span",{style:{color:"#F8F8F2"}},", {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u5411\u7528\u6237\u8868\u4E2D\u6CE8\u5165\u5B57\u7B26\u4E32\u5B57\u6BB5 foo")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:'(property) foo?: Field<string> | Shorthand<"string" | "char" | "text">'},"foo"),l(": ")]),s("span",{style:{color:"#E6DB74"}},"'string'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u4F60\u8FD8\u53EF\u4EE5\u914D\u7F6E\u9ED8\u8BA4\u503C\u4E3A 'bar'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-err",null,[s("data-lsp",{lsp:'(property) foo?: Field<string> | Shorthand<"string" | "char" | "text">'},"foo"),l(": { "),s("data-lsp",{lsp:'(property) Field<string>.type: "string" | "char" | "text"'},"type")]),l(": ")]),s("span",{style:{color:"#E6DB74"}},"'string'"),s("span",{style:{color:"#F8F8F2"}},[l(", "),s("data-lsp",{lsp:"(property) Field<string>.initial?: string"},"initial"),l(": ")]),s("span",{style:{color:"#E6DB74"}},"'bar'"),s("span",{style:{color:"#F8F8F2"}}," },")]),l(`
`),s("span",{class:"error"},[s("span",null,"An object literal cannot have multiple properties with the same name."),s("span",{class:"code"},"1117")]),s("span",{class:"error-behind"},"An object literal cannot have multiple properties with the same name."),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"})")]),l(`
`)])])],-1),m=s("p",null,"\u5411 Channel \u6CE8\u5165\u5B57\u6BB5\u540C\u7406\u3002",-1),g=s("h2",{id:"\u6269\u5C55\u8868",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u6269\u5C55\u8868","aria-hidden":"true"},"#"),l(" \u6269\u5C55\u8868")],-1),E=s("p",null,[l("\u5229\u7528 "),s("code",null,"ctx.model.extend()"),l(" \u7684\u7B2C\u4E09\u4E2A\u53C2\u6570\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u5B9A\u4E49\u65B0\u7684\u6570\u636E\u8868\u4E86\uFF1A")],-1),f=s("pre",{class:"shiki monokai twoslash lsp",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("div",{class:"code-container"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// TypeScript \u7528\u6237\u9700\u8981\u8FDB\u884C\u7C7B\u578B\u5408\u5E76")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"declare"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF"}},"module"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'koishi'"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#66D9EF"}},"interface"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},[s("data-lsp",{lsp:"interface Tables"},"Tables")]),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("    "),s("data-lsp",{lsp:"(property) Tables.schedule: Schedule"},"schedule")]),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},[s("data-lsp",{lsp:`interface Schedule
(alias) interface Schedule
import Schedule`},"Schedule")])]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")]),l(`
`),s("span",{class:"line"},"\xA0"),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF"}},"interface"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},[s("data-lsp",{lsp:"interface Schedule"},"Schedule")]),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:"(property) Schedule.id: number"},"id")]),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF"}},"number")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:"(property) Schedule.assignee: string"},"assignee")]),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF"}},"string")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:"(property) Schedule.time: Date"},"time")]),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},[s("data-lsp",{lsp:"interface Date"},"Date")])]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:"(property) Schedule.lastCall: Date"},"lastCall")]),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},[s("data-lsp",{lsp:"interface Date"},"Date")])]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:"(property) Schedule.interval: number"},"interval")]),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF"}},"number")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:"(property) Schedule.command: string"},"command")]),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF"}},"string")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:"(property) Schedule.session: Session.Payload"},"session")]),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},[s("data-lsp",{lsp:`(alias) class Session<U extends keyof User = never, G extends keyof Channel = never>
(alias) namespace Session
import Session`},"Session")]),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#A6E22E"}},[s("data-lsp",{lsp:"interface Session<U extends keyof User = never, G extends keyof Channel = never>.Payload"},"Payload")])]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")]),l(`
`),s("span",{class:"line"},"\xA0"),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[s("data-lsp",{lsp:"const ctx: Context"},"ctx"),l("."),s("data-lsp",{lsp:"(property) Context.Services.model: DatabaseService"},"model"),l(".")]),s("span",{style:{color:"#A6E22E"}},[s("data-lsp",{lsp:`(method) Database<Tables>.extend<"schedule">(name: "schedule", fields: MapField<{
    id?: number;
} & {
    assignee?: string;
} & {
    time?: Date;
} & {
    lastCall?: Date;
} & {
    interval?: number;
} & {
    command?: string;
} & {
    session?: Session.Payload;
} & ... 71 more ... & {
    ...;
}>, config?: Model<S = any>.Config<...>): void`},"extend")]),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'schedule'"),s("span",{style:{color:"#F8F8F2"}},", {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u5404\u5B57\u6BB5\u7C7B\u578B")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:'(property) id?: Field<number> | Shorthand<"unsigned" | "integer" | "float" | "double" | "decimal">'},"id"),l(": ")]),s("span",{style:{color:"#E6DB74"}},"'unsigned'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:'(property) assignee?: Field<string> | Shorthand<"string" | "char" | "text">'},"assignee"),l(": ")]),s("span",{style:{color:"#E6DB74"}},"'string'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:'(property) time?: Field<Date> | Shorthand<"timestamp" | "date" | "time">'},"time"),l(": ")]),s("span",{style:{color:"#E6DB74"}},"'timestamp'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:'(property) lastCall?: Field<Date> | Shorthand<"timestamp" | "date" | "time">'},"lastCall"),l(": ")]),s("span",{style:{color:"#E6DB74"}},"'timestamp'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:'(property) interval?: Field<number> | Shorthand<"unsigned" | "integer" | "float" | "double" | "decimal">'},"interval"),l(": ")]),s("span",{style:{color:"#E6DB74"}},"'integer'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:'(property) command?: Field<string> | Shorthand<"string" | "char" | "text">'},"command"),l(": ")]),s("span",{style:{color:"#E6DB74"}},"'text'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:'(property) session?: Field<Session.Payload> | Shorthand<"json">'},"session"),l(": ")]),s("span",{style:{color:"#E6DB74"}},"'json'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}, {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u4F7F\u7528\u81EA\u589E\u7684\u4E3B\u952E\u503C")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[l("  "),s("data-lsp",{lsp:"(property) Model<S = any>.Config<O = {}>.autoInc?: boolean"},"autoInc"),l(": ")]),s("span",{style:{color:"#AE81FF"}},"true"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"})")]),l(`
`)])])],-1),D=s("h2",{id:"\u521B\u5EFA\u7D22\u5F15",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u521B\u5EFA\u7D22\u5F15","aria-hidden":"true"},"#"),l(" \u521B\u5EFA\u7D22\u5F15")],-1),b=s("p",null,"\u6211\u4EEC\u8FD8\u53EF\u4EE5\u4E3A\u6570\u636E\u5E93\u58F0\u660E\u7D22\u5F15\uFF1A",-1),_=s("pre",{class:"shiki monokai twoslash lsp",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("div",{class:"code-container"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// \u6CE8\u610F\u8FD9\u91CC\u914D\u7F6E\u7684\u662F\u7B2C\u4E09\u4E2A\u53C2\u6570\uFF0C\u4E5F\u5C31\u662F\u4E4B\u524D autoInc \u6240\u5728\u7684\u53C2\u6570")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"ctx.model."),s("span",{style:{color:"#A6E22E"}},"extend"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'foo'"),s("span",{style:{color:"#F8F8F2"}},", {}, {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},[s("data-lsp",{lsp:"(property) Tables.foo: Foo"}),s("data-lsp",{lsp:"interface Foo"}),l("// \u4E3B\u952E\uFF0C\u9ED8\u8BA4\u4E3A 'id'")])]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u4E3B\u952E\u5C06\u4F1A\u88AB\u7528\u4E8E Query \u7684\u7B80\u5199\u5F62\u5F0F\uFF0C\u5982\u679C\u4F20\u5165\u7684\u662F\u539F\u59CB\u7C7B\u578B\u6216\u6570\u7EC4\u5219\u4F1A\u81EA\u884C\u7406\u89E3\u6210\u4E3B\u952E\u7684\u503C")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  primary: "),s("span",{style:{color:"#E6DB74"}},"'name'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u552F\u4E00\u952E\uFF0C\u8FD9\u5E94\u8BE5\u662F\u4E00\u4E2A\u5217\u8868")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},[s("data-lsp",{lsp:"interface Foo"}),l("// \u8FD9\u4E2A\u5217\u8868\u4E2D\u7684\u5B57\u6BB5\u5BF9\u5E94\u7684\u503C\u5728\u521B\u5EFA\u548C\u4FEE\u6539\u7684\u65F6\u5019\u90FD\u4E0D\u5141\u8BB8\u4E0E\u5176\u4ED6\u884C\u91CD\u590D")])]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[s("data-lsp",{lsp:"(property) Foo.name: string"}),l("  unique: [")]),s("span",{style:{color:"#E6DB74"}},"'bar'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E6DB74"}},"'baz'"),s("span",{style:{color:"#F8F8F2"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},[s("data-lsp",{lsp:"(property) Foo.bar: string"}),l("// \u5916\u952E\uFF0C\u8FD9\u5E94\u8BE5\u662F\u4E00\u4E2A\u952E\u503C\u5BF9")])]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},[s("data-lsp",{lsp:"(property) Foo.baz: string"}),l("  foreign: {")])]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#88846F"}},"// \u76F8\u5F53\u4E8E\u7EA6\u675F\u4E86 foo.uid \u5FC5\u987B\u662F\u67D0\u4E00\u4E2A user.id")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    uid: ["),s("span",{style:{color:"#E6DB74"}},"'user'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E6DB74"}},"'id'"),s("span",{style:{color:"#F8F8F2"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"})")]),l(`
`)])])],-1);function S(x,v){const e=t("panel-view");return p(),r(c,null,[i,y,d,h,n(e,{class:"code",title:"",style:{}},{default:a(()=>[u]),_:1}),m,g,E,n(e,{class:"code",title:"",style:{}},{default:a(()=>[f]),_:1}),D,b,n(e,{class:"code",title:"",style:{}},{default:a(()=>[_]),_:1})],64)}var k=o(F,[["render",S],["__file","model.html.vue"]]);export{k as default};
